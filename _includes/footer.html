
<script src="{{ site.baseurl }}/assets/jquery.min.js"></script>

{% if page.linkify %}
<script src="{{ site.baseurl }}/assets/linkify.min.js"></script>
<script src="{{ site.baseurl }}/assets/linkify-jquery.min.js"></script>

<script type="text/javascript">
$('.references').linkify();
$('.bibliography').linkify();
$('.links').linkify();
</script>
{% endif %}

{% if page.latex %}
<!-- Script which renders TeX using tex.s2cms.ru -->
<script src="//tex.s2cms.ru/latex.js"></script>
<script type="text/javascript">
 $("script[type='math/tex']").replaceWith(
     function(){
         var tex = $(this).text();
         return "&zwnj;$$" + tex + "$$&zwnj;";
     });
 $("script[type='math/tex; mode=display']").replaceWith(
     function(){
         var tex = $(this).text().replace(/%.*?(\n|$)/g,"");
         return "<p class=\"equation\">" +
                 "$$" + tex + "$$" +
                "</p>";
     });
</script>
{% endif %}

<script type="text/javascript">
WebFontConfig = {
 google: { families: [ 'PT+Serif:400,700,400italic:latin', 'PT+Sans:400:latin' ] }
};
(function(d) {
      var wf = d.createElement('script'), s = d.scripts[0];
      wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js';
      wf.async = true;
      s.parentNode.insertBefore(wf, s);
   })(document);
</script>

{% if page.agda %}
<!-- FOLDABLE  -->
<script type="text/javascript">
var newHeight;
 $('pre.foldable').each(function(){
     var autoHeight = $(this).height();
     var lineHeight = parseFloat($(this).css('line-height'));
     var plus    = $("<div></div>");
     var horLine = $("<div></div>");
     var verLine = $("<div></div>");
     $(this).prepend(plus);
     plus.css({
         'position'         : 'relative',
         'float'            : 'right',
         'right'            : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'width'            : lineHeight,
         'height'           : lineHeight});
     verLine.css({
         'position'         : 'relative',
         'height'           : lineHeight,
         'width'            : '3px',
         'background-color' : '#C1E0FF'});
     horLine.css({
         'position'         : 'relative',
         'top'              : '-' + (0.5 * lineHeight + 1.5) + 'px',
         'left'             : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'height'           : '3px',
         'width'            : lineHeight,
         'background-color' : '#C1E0FF'});
     plus.append(verLine);
     plus.append(horLine);

     // The line stars at 1 line
     newHeight = (parseFloat($(this).attr('until')) - 1) * lineHeight;

     if ( newHeight <= 0 || isNaN(newHeight) ){
       newHeight = lineHeight;
     }
     console.log( "Until> ", newHeight);

     $(this).height(newHeight);
     $(this).css('overflow','hidden');

     $(this).click(function(){
       if ($(this).height() == autoHeight) {
         $(this).height(newHeight);
         plus.show();
       }
       else{
         $(this).height('auto');
         plus.hide();
       }
     });
 });
</script>
{% endif %}

{% if page.algolia %}
<script type="text/javascript">
// moment(moment(modifiedDate).format('YYYYMMDD')).fromNow();
$('.algolia-modified a').map(
  function(){
    var modifiedDate = $(this).text();
    $(this).text(moment(moment(modifiedDate).format('YYYYMMDD')).fromNow());
  }
);
</script>
{% endif %}


{% if page.references %}
<script type="text/javascript">
  if ( $('div').hasClass('cited-references') ){
    if ( $('div').hasClass('references') ){
      $('.cite-references').append( $('.references').html() );
      $('.references').hide();
    }
    $(".cited-references").prepend("<h2 id='refs'>References</h2>");
    $(".toc nav>ul").append("<li><a href='#refs'>References</a></li>");
  }
</script>

<script type="text/javascript">
$('.citation pre').each(function(){
    var pre = $(this);
    var title = $(this).data('title');
    var id = $(this).data('id');
    var tag = id.split('/')[ id.length() - 2 ];
    var url = $(this).data('url');
    var coauthor=$(this).data('coauthor');
    if (coauthor != ""){
      coauthor = " and " + coauthor;
    }
    pre.append(
"@online{jonaprieto" + id + ",\n" +
"  author ={Jonathan Prieto-Cubides" +  coauthor + "},\n" +
"  title  ={" + title + "},\n" +
"  url    ={" + url   + "}\n" +
"}\n"
);
  });

$('.citation').show();
</script>

{% endif %}
